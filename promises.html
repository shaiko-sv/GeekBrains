<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
    <div class="ajax-data"></div>
    <button class="ajax-get">Async get data</button>
<script>

    // let getData = new Promise((resolve, reject) => {
    //     setTimeout(() => {
    //         resolve([543, 652, 123]);
    //     }, 1500)
    // });
    //
    // let getJob = userID => {
    //     return new Promise((resolve, reject) => {
    //         setTimeout(ID => {
    //             let userData = {
    //                 name: 'John',
    //                 job: 'fullstack dev',
    //             };
    //             resolve(`User with ${ID} is ${userData.job}`);
    //         }, 1500, userID)
    //     })
    // };
    //
    // // getData
    // //     .then(IDs => {
    // //         console.log(IDs);
    // //         return getJob(IDs[1]);
    // //     })
    // //     .then(job => console.log(job))
    // //     .catch(error => console.log(error));
    //
    // async function getJobAW() {
    //     let IDs = await getData;
    //     console.log(IDs);
    //     let job = await getJob(IDs[2]);
    //     console.log(job);
    //     return  job;
    // }
    // // let a = getJobAW();
    // // console.log(a);
    // getJobAW().then(data => console.log(data));
    "use strict";

    const API = 'https://raw.githubusercontent.com/GeekBrainsTutorial/online-store-api/master/responses';

    // let num = (a) => {
    //     return new Promise((resolve, reject) => {
    //         setTimeout(() => {
    //             if (a) {
    //                 const b = a + 10;
    //                 resolve(b);
    //             } else {
    //             reject('Error!!!');
    //             }
    //         }, 2000)
    //     })
    // }
    //
    // num()
    //     .then((data) => {
    //         console.log(data);
    //         return num(20)
    //     })
    // .catch((error) => {
    //     console.log(error);
    // });

    // let getRequest = url => {
    //     //let xhr = new XMLHttpRequest();
    //     //xhr.open('GET', url, true);
    //     //xhr.send();
    //     return new Promise((resolve, reject) => {
    //         // window.ActiveXObject -> xhr = new ActiveXObject();
    //         let xhr = new XMLHttpRequest();
    //         xhr.open('GET', url, true);
    //         xhr.onreadystatechange = () => {
    //             console.log(xhr.readyState); //test
    //             if(xhr.readyState !== 4) {
    //                 return
    //             }
    //             if(xhr.readyState === 4){
    //                 if (xhr.status !== 200){
    //                     reject(`Error ${xhr.status} ${xhr.statusText}`);
    //                 } else {
    //                     resolve(xhr.responseText);
    //                 }
    //             }
    //         };
    //         xhr.send();
    //     })
    // };
    // getRequest(`${API}/login.json`)
    //     .then((data) => {
    //         console.log(JSON.parse(data));
    //     })
    // .catch((error) => {
    //     console.log(error);
    // })

    // let getRequest = url => {
    //     //let xhr = new XMLHttpRequest();
    //     //xhr.open('GET', url, true);
    //     //xhr.send();
    //     return new Promise((resolve, reject) => {
    //         // window.ActiveXObject -> xhr = new ActiveXObject();
    //         let xhr = new XMLHttpRequest();
    //         xhr.open('GET', url, true);
    //         xhr.onreadystatechange = () => {
    //             console.log(xhr.readyState); //test
    //             if(xhr.readyState !== 4) {
    //                 return
    //             }
    //             if(xhr.readyState === 4){
    //                 if (xhr.status !== 200){
    //                     reject(`Error ${xhr.status} ${xhr.statusText}`);
    //                 } else {
    //                     resolve(xhr.responseText);
    //                 }
    //             }
    //         };
    //         xhr.send();
    //     })
    // };
    // getRequest(`https://cedrusindustries.info/test/test.json`)
    //     .then((data) => {
    //         console.log(data);
    //     })
    //     .catch((error) => {
    //         console.log(error);
    //     })
    window.onload = () => {
        document.querySelector('.ajax-get').addEventListener('click', () => {
            // fetch

            let block = document.querySelector('.ajax-data');

            fetch('https://cedrusindustries.info/test/test.json')
                .then((result) => {
                    return result.json();
                })
                // .then((data) => {
                //     console.log(data);
                //     block.innerHTML = `Name ${data.tel} (${data.name})`;
                // })
                .catch((error) => {
                    console.log(error);
                })

        })
    }


</script>
</body>
</html>